{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rober\\\\Documents\\\\copiaswaps-client\\\\swaps-client\\\\src\\\\components\\\\Exchange\\\\PositionsList.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport cx from \"classnames\";\nimport Tooltip from \"../Tooltip/Tooltip\";\nimport PositionSeller from \"./PositionSeller\";\nimport PositionEditor from \"./PositionEditor\";\nimport OrdersToa from \"./OrdersToa\";\nimport { ImSpinner2 } from \"react-icons/im\";\nimport { helperToast, bigNumberify, getLiquidationPrice, getUsd, getLeverage, formatAmount, USD_DECIMALS, FUNDING_RATE_PRECISION, SWAP, LONG, SHORT, INCREASE, DECREASE } from \"../../Helpers\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst getOrdersForPosition = (position, orders, nativeTokenAddress) => {\n  if (!orders || orders.length === 0) {\n    return [];\n  }\n  /* eslint-disable array-callback-return */\n\n\n  return orders.filter(order => {\n    if (order.type === SWAP) {\n      return false;\n    }\n\n    const hasMatchingIndexToken = order.indexToken === nativeTokenAddress ? position.indexToken.isNative : order.indexToken === position.indexToken.address;\n    const hasMatchingCollateralToken = order.collateralToken === nativeTokenAddress ? position.collateralToken.isNative : order.collateralToken === position.collateralToken.address;\n\n    if (order.isLong === position.isLong && hasMatchingIndexToken && hasMatchingCollateralToken) {\n      return true;\n    }\n  }).map(order => {\n    if (order.type === DECREASE && order.sizeDelta.gt(position.size)) {\n      order.error = \"Order size exceeds position size, order cannot be executed\";\n    }\n\n    return order;\n  });\n};\n\nexport default function PositionsList(props) {\n  _s();\n\n  const {\n    pendingPositions,\n    setPendingPositions,\n    positions,\n    positionsDataIsLoading,\n    positionsMap,\n    infoTokens,\n    active,\n    account,\n    library,\n    pendingTxns,\n    setPendingTxns,\n    setListSection,\n    flagOrdersEnabled,\n    savedIsPnlInLeverage,\n    chainId,\n    nativeTokenAddress,\n    orders,\n    setIsWaitingForPluginApproval,\n    approveOrderBook,\n    isPluginApproving,\n    isWaitingForPluginApproval,\n    orderBookApproved,\n    positionRouterApproved,\n    isWaitingForPositionRouterApproval,\n    isPositionRouterApproving,\n    approvePositionRouter,\n    showPnlAfterFees,\n    setMarket,\n    trackAction,\n    usdgSupply,\n    totalTokenWeights\n  } = props;\n  const [positionToEditKey, setPositionToEditKey] = useState(undefined);\n  const [positionToSellKey, setPositionToSellKey] = useState(undefined);\n  const [isPositionEditorVisible, setIsPositionEditorVisible] = useState(undefined);\n  const [isPositionSellerVisible, setIsPositionSellerVisible] = useState(undefined);\n  const [collateralTokenAddress, setCollateralTokenAddress] = useState(undefined);\n  const [ordersToaOpen, setOrdersToaOpen] = useState(false);\n  const [isHigherSlippageAllowed, setIsHigherSlippageAllowed] = useState(false);\n\n  const editPosition = position => {\n    setCollateralTokenAddress(position.collateralToken.address);\n    setPositionToEditKey(position.key);\n    setIsPositionEditorVisible(true);\n  };\n\n  const sellPosition = position => {\n    setPositionToSellKey(position.key);\n    setIsPositionSellerVisible(true);\n    setIsHigherSlippageAllowed(false);\n  };\n\n  const onPositionClick = position => {\n    helperToast.success(`${position.isLong ? \"Long\" : \"Short\"} ${position.indexToken.symbol} market selected`);\n    setMarket(position.isLong ? LONG : SHORT, position.indexToken.address);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"PositionsList\",\n    children: [/*#__PURE__*/_jsxDEV(PositionEditor, {\n      pendingPositions: pendingPositions,\n      setPendingPositions: setPendingPositions,\n      positionsMap: positionsMap,\n      positionKey: positionToEditKey,\n      isVisible: isPositionEditorVisible,\n      setIsVisible: setIsPositionEditorVisible,\n      infoTokens: infoTokens,\n      active: active,\n      account: account,\n      library: library,\n      collateralTokenAddress: collateralTokenAddress,\n      pendingTxns: pendingTxns,\n      setPendingTxns: setPendingTxns,\n      getUsd: getUsd,\n      getLeverage: getLeverage,\n      savedIsPnlInLeverage: savedIsPnlInLeverage,\n      positionRouterApproved: positionRouterApproved,\n      isPositionRouterApproving: isPositionRouterApproving,\n      isWaitingForPositionRouterApproval: isWaitingForPositionRouterApproval,\n      approvePositionRouter: approvePositionRouter,\n      chainId: chainId,\n      trackAction: trackAction\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this), ordersToaOpen && /*#__PURE__*/_jsxDEV(OrdersToa, {\n      setIsVisible: setOrdersToaOpen,\n      approveOrderBook: approveOrderBook,\n      isPluginApproving: isPluginApproving\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 9\n    }, this), isPositionSellerVisible && /*#__PURE__*/_jsxDEV(PositionSeller, {\n      pendingPositions: pendingPositions,\n      setPendingPositions: setPendingPositions,\n      setIsWaitingForPluginApproval: setIsWaitingForPluginApproval,\n      approveOrderBook: approveOrderBook,\n      isPluginApproving: isPluginApproving,\n      isWaitingForPluginApproval: isWaitingForPluginApproval,\n      orderBookApproved: orderBookApproved,\n      positionsMap: positionsMap,\n      positionKey: positionToSellKey,\n      isVisible: isPositionSellerVisible,\n      setIsVisible: setIsPositionSellerVisible,\n      infoTokens: infoTokens,\n      active: active,\n      account: account,\n      orders: orders,\n      library: library,\n      pendingTxns: pendingTxns,\n      setPendingTxns: setPendingTxns,\n      flagOrdersEnabled: flagOrdersEnabled,\n      savedIsPnlInLeverage: savedIsPnlInLeverage,\n      chainId: chainId,\n      nativeTokenAddress: nativeTokenAddress,\n      setOrdersToaOpen: setOrdersToaOpen,\n      positionRouterApproved: positionRouterApproved,\n      isPositionRouterApproving: isPositionRouterApproving,\n      isWaitingForPositionRouterApproval: isWaitingForPositionRouterApproval,\n      approvePositionRouter: approvePositionRouter,\n      isHigherSlippageAllowed: isHigherSlippageAllowed,\n      setIsHigherSlippageAllowed: setIsHigherSlippageAllowed,\n      trackAction: trackAction,\n      usdgSupply: usdgSupply,\n      totalTokenWeights: totalTokenWeights,\n      showPnlAfterFees: showPnlAfterFees\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 9\n    }, this), positions && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Exchange-list small\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [positions.length === 0 && positionsDataIsLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"Exchange-empty-positions-list-note App-card\",\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 15\n        }, this), positions.length === 0 && !positionsDataIsLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"Exchange-empty-positions-list-note App-card\",\n          children: \"No open positions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 15\n        }, this), positions.map(position => {\n          const positionOrders = getOrdersForPosition(position, orders, nativeTokenAddress);\n          const liquidationPrice = getLiquidationPrice(position);\n          const hasPositionProfit = position[showPnlAfterFees ? \"hasProfitAfterFees\" : \"hasProfit\"];\n          const positionDelta = position[showPnlAfterFees ? \"pendingDeltaAfterFees\" : \"pendingDelta\"] || bigNumberify(0);\n          let borrowFeeText;\n\n          if (position.collateralToken && position.collateralToken.fundingRate) {\n            const borrowFeeRate = position.collateralToken.fundingRate.mul(position.size).mul(24).div(FUNDING_RATE_PRECISION);\n            borrowFeeText = `Borrow Fee / Day: $${formatAmount(borrowFeeRate, USD_DECIMALS, 2)}`;\n          }\n\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"App-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"App-card-title\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"Exchange-list-title\",\n                children: position.indexToken.symbol\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"App-card-divider\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"App-card-content\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"App-card-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"label\",\n                  children: \"Leverage\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [formatAmount(position.leverage, 4, 2, true), \"x\\xA0\", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: cx(\"Exchange-list-side\", {\n                      positive: position.isLong,\n                      negative: !position.isLong\n                    }),\n                    children: position.isLong ? \"Long\" : \"Short\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 222,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 220,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"App-card-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"label\",\n                  children: \"Size\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 233,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"$\", formatAmount(position.size, USD_DECIMALS, 2, true)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 234,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"App-card-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"label\",\n                  children: \"Collateral\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 237,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(Tooltip, {\n                    handle: `$${formatAmount(position.collateralAfterFee, USD_DECIMALS, 2, true)}`,\n                    position: \"right-bottom\",\n                    handleClassName: cx(\"plain\", {\n                      negative: position.hasLowCollateral\n                    }),\n                    renderContent: () => {\n                      return /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: [position.hasLowCollateral && /*#__PURE__*/_jsxDEV(\"div\", {\n                          children: [\"WARNING: This position has a low amount of collateral after deducting borrowing fees, deposit more collateral to reduce the position's liquidation risk.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 250,\n                            columnNumber: 37\n                          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 251,\n                            columnNumber: 37\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 247,\n                          columnNumber: 35\n                        }, this), \"Initial Collateral: $\", formatAmount(position.collateral, USD_DECIMALS, 2, true), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 255,\n                          columnNumber: 33\n                        }, this), \"Borrow Fee: $\", formatAmount(position.fundingFee, USD_DECIMALS, 2, true), borrowFeeText && /*#__PURE__*/_jsxDEV(\"div\", {\n                          children: borrowFeeText\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 257,\n                          columnNumber: 51\n                        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 258,\n                          columnNumber: 33\n                        }, this), \"Use the \\\"Edit\\\" button to deposit or withdraw collateral.\"]\n                      }, void 0, true);\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 239,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 238,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"App-card-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"label\",\n                  children: \"PnL\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 267,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: cx(\"Exchange-list-info-label\", {\n                      positive: hasPositionProfit && positionDelta.gt(0),\n                      negative: !hasPositionProfit && positionDelta.gt(0),\n                      muted: positionDelta.eq(0)\n                    }),\n                    children: [position.deltaStr, \" (\", position.deltaPercentageStr, \")\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 269,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 268,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 266,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"App-card-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"label\",\n                  children: \"Net Value\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 281,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(Tooltip, {\n                    handle: `$${formatAmount(position.netValue, USD_DECIMALS, 2, true)}`,\n                    position: \"right-bottom\",\n                    handleClassName: \"plain\",\n                    renderContent: () => {\n                      return /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: [\"Net Value:\", \" \", showPnlAfterFees ? \"Initial Collateral - Fees + PnL\" : \"Initial Collateral - Borrow Fee + PnL\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 294,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 295,\n                          columnNumber: 33\n                        }, this), \"Initial Collateral: $\", formatAmount(position.collateral, USD_DECIMALS, 2, true), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 297,\n                          columnNumber: 33\n                        }, this), \"PnL: \", position.deltaBeforeFeesStr, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 299,\n                          columnNumber: 33\n                        }, this), \"Borrow Fee: $\", formatAmount(position.fundingFee, USD_DECIMALS, 2, true), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 301,\n                          columnNumber: 33\n                        }, this), \"Open + Close fee: $\", formatAmount(position.positionFee, USD_DECIMALS, 2, true), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 303,\n                          columnNumber: 33\n                        }, this), \"PnL After Fees: \", position.deltaAfterFeesStr, \" (\", position.deltaAfterFeesPercentageStr, \")\"]\n                      }, void 0, true);\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 283,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 282,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"App-card-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"label\",\n                  children: \"Orders\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 312,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [positionOrders.length === 0 && \"None\", positionOrders.map(order => {\n                    return /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"Position-list-order\",\n                      children: [order.triggerAboveThreshold ? \">\" : \"<\", \" \", formatAmount(order.triggerPrice, 30, 2, true), \":\", order.type === INCREASE ? \" +\" : \" -\", \"$\", formatAmount(order.sizeDelta, 30, 2, true), order.error && /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: [\", \", /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"negative\",\n                          children: order.error\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 322,\n                          columnNumber: 37\n                        }, this)]\n                      }, void 0, true)]\n                    }, `${order.isLong}-${order.type}-${order.index}`, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 317,\n                      columnNumber: 29\n                    }, this);\n                  })]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 313,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 311,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"App-card-divider\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"App-card-content\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"App-card-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"label\",\n                  children: \"Mark Price\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 334,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"$\", formatAmount(position.markPrice, USD_DECIMALS, 2, true)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 335,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"App-card-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"label\",\n                  children: \"Entry Price\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 338,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"$\", formatAmount(position.averagePrice, USD_DECIMALS, 2, true)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 339,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 337,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"App-card-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"label\",\n                  children: \"Liq. Price\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 342,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"$\", formatAmount(liquidationPrice, USD_DECIMALS, 2, true)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 343,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 341,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"App-card-divider\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 346,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"App-card-options\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"App-button-option App-card-option\",\n                onClick: () => editPosition(position),\n                disabled: position.size.eq(0) || position.hasPendingChanges,\n                children: \"Edit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 348,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"App-button-option App-card-option\",\n                onClick: () => sellPosition(position),\n                disabled: position.size.eq(0) || position.hasPendingChanges,\n                children: \"Close\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 355,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 19\n            }, this)]\n          }, position.key, true, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 17\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"large App-box\",\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"Exchange-list large\",\n        children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"Exchange-list-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Position\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 373,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Net Value\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Size\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 375,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Collateral\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 376,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Mark Price\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 377,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Entry Price\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Liq. Price\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 379,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 381,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 13\n          }, this), positions.length === 0 && positionsDataIsLoading && /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"td\", {\n              colSpan: \"15\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"Exchange-empty-positions-list-note\",\n                children: \"Loading...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 386,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 385,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 384,\n            columnNumber: 15\n          }, this), positions.length === 0 && !positionsDataIsLoading && /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"td\", {\n              colSpan: \"15\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"Exchange-empty-positions-list-note\",\n                children: \"No open positions\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 393,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 391,\n            columnNumber: 15\n          }, this), positions.map(position => {\n            const liquidationPrice = getLiquidationPrice(position) || bigNumberify(0);\n            const positionOrders = getOrdersForPosition(position, orders, nativeTokenAddress);\n            const hasOrderError = !!positionOrders.find(order => order.error);\n            const hasPositionProfit = position[showPnlAfterFees ? \"hasProfitAfterFees\" : \"hasProfit\"];\n            const positionDelta = position[showPnlAfterFees ? \"pendingDeltaAfterFees\" : \"pendingDelta\"] || bigNumberify(0);\n            let borrowFeeText;\n\n            if (position.collateralToken && position.collateralToken.fundingRate) {\n              const borrowFeeRate = position.collateralToken.fundingRate.mul(position.size).mul(24).div(FUNDING_RATE_PRECISION);\n              borrowFeeText = `Borrow Fee / Day: $${formatAmount(borrowFeeRate, USD_DECIMALS, 2)}`;\n            }\n\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"clickable\",\n                onClick: () => onPositionClick(position),\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"Exchange-list-title\",\n                  children: [position.indexToken.symbol, position.hasPendingChanges && /*#__PURE__*/_jsxDEV(ImSpinner2, {\n                    className: \"spin position-loading-icon\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 418,\n                    columnNumber: 54\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 416,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"Exchange-list-info-label\",\n                  children: [position.leverage && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"muted\",\n                    children: [formatAmount(position.leverage, 4, 2, true), \"x\\xA0\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 422,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: cx({\n                      positive: position.isLong,\n                      negative: !position.isLong\n                    }),\n                    children: position.isLong ? \"Long\" : \"Short\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 424,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 420,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 415,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [!position.netValue && \"Opening...\", position.netValue && /*#__PURE__*/_jsxDEV(Tooltip, {\n                    handle: `$${formatAmount(position.netValue, USD_DECIMALS, 2, true)}`,\n                    position: \"left-bottom\",\n                    handleClassName: \"plain\",\n                    renderContent: () => {\n                      return /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: [\"Net Value:\", \" \", showPnlAfterFees ? \"Initial Collateral - Fees + PnL\" : \"Initial Collateral - Borrow Fee + PnL\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 444,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 445,\n                          columnNumber: 33\n                        }, this), \"Initial Collateral: $\", formatAmount(position.collateral, USD_DECIMALS, 2, true), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 447,\n                          columnNumber: 33\n                        }, this), \"PnL: \", position.deltaBeforeFeesStr, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 449,\n                          columnNumber: 33\n                        }, this), \"Borrow Fee: $\", formatAmount(position.fundingFee, USD_DECIMALS, 2, true), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 451,\n                          columnNumber: 33\n                        }, this), \"Open + Close fee: $\", formatAmount(position.positionFee, USD_DECIMALS, 2, true), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 453,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 454,\n                          columnNumber: 33\n                        }, this), \"PnL After Fees: \", position.deltaAfterFeesStr, \" (\", position.deltaAfterFeesPercentageStr, \")\"]\n                      }, void 0, true);\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 433,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 430,\n                  columnNumber: 21\n                }, this), position.deltaStr && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: cx(\"Exchange-list-info-label\", {\n                    positive: hasPositionProfit && positionDelta.gt(0),\n                    negative: !hasPositionProfit && positionDelta.gt(0),\n                    muted: positionDelta.eq(0)\n                  }),\n                  children: [position.deltaStr, \" (\", position.deltaPercentageStr, \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 463,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 429,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"$\", formatAmount(position.size, USD_DECIMALS, 2, true)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 475,\n                  columnNumber: 21\n                }, this), positionOrders.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                  onClick: () => setListSection && setListSection(\"Orders\"),\n                  children: /*#__PURE__*/_jsxDEV(Tooltip, {\n                    handle: `Orders (${positionOrders.length})`,\n                    position: \"left-bottom\",\n                    handleClassName: cx([\"Exchange-list-info-label\", \"Exchange-position-list-orders\", \"plain\", \"clickable\"], {\n                      muted: !hasOrderError,\n                      negative: hasOrderError\n                    }),\n                    renderContent: () => {\n                      return /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                          children: \"Active Orders\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 488,\n                          columnNumber: 33\n                        }, this), positionOrders.map(order => {\n                          return /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"Position-list-order\",\n                            children: [order.triggerAboveThreshold ? \">\" : \"<\", \" \", formatAmount(order.triggerPrice, 30, 2, true), \":\", order.type === INCREASE ? \" +\" : \" -\", \"$\", formatAmount(order.sizeDelta, 30, 2, true), order.error && /*#__PURE__*/_jsxDEV(_Fragment, {\n                              children: [\", \", /*#__PURE__*/_jsxDEV(\"span\", {\n                                className: \"negative\",\n                                children: order.error\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 501,\n                                columnNumber: 45\n                              }, this)]\n                            }, void 0, true)]\n                          }, `${order.isLong}-${order.type}-${order.index}`, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 491,\n                            columnNumber: 37\n                          }, this);\n                        })]\n                      }, void 0, true);\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 478,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 477,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 474,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(Tooltip, {\n                  handle: `$${formatAmount(position.collateralAfterFee, USD_DECIMALS, 2, true)}`,\n                  position: \"left-bottom\",\n                  handleClassName: cx(\"plain\", {\n                    negative: position.hasLowCollateral\n                  }),\n                  renderContent: () => {\n                    return /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [position.hasLowCollateral && /*#__PURE__*/_jsxDEV(\"div\", {\n                        children: [\"WARNING: This position has a low amount of collateral after deducting borrowing fees, deposit more collateral to reduce the position's liquidation risk.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 526,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 527,\n                          columnNumber: 33\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 523,\n                        columnNumber: 31\n                      }, this), \"Initial Collateral: $\", formatAmount(position.collateral, USD_DECIMALS, 2, true), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 531,\n                        columnNumber: 29\n                      }, this), \"Borrow Fee: $\", formatAmount(position.fundingFee, USD_DECIMALS, 2, true), borrowFeeText && /*#__PURE__*/_jsxDEV(\"div\", {\n                        children: borrowFeeText\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 533,\n                        columnNumber: 47\n                      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 534,\n                        columnNumber: 29\n                      }, this), \"Use the \\\"Edit\\\" button to deposit or withdraw collateral.\"]\n                    }, void 0, true);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 515,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 514,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"clickable\",\n                onClick: () => onPositionClick(position),\n                children: /*#__PURE__*/_jsxDEV(Tooltip, {\n                  handle: `$${formatAmount(position.markPrice, USD_DECIMALS, 2, true)}`,\n                  position: \"left-bottom\",\n                  handleClassName: \"plain clickable\",\n                  renderContent: () => {\n                    return /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [\"Click on a row to select the position's market, then use the swap box to increase your position size if needed.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 551,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 552,\n                        columnNumber: 29\n                      }, this), \"Use the \\\"Close\\\" button to reduce your position size, or to set stop-loss / take-profit orders.\"]\n                    }, void 0, true);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 542,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 541,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"clickable\",\n                onClick: () => onPositionClick(position),\n                children: [\"$\", formatAmount(position.averagePrice, USD_DECIMALS, 2, true)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 560,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"clickable\",\n                onClick: () => onPositionClick(position),\n                children: [\"$\", formatAmount(liquidationPrice, USD_DECIMALS, 2, true)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 563,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"Exchange-list-action\",\n                  onClick: () => {\n                    trackAction(\"Button clicked\", {\n                      buttonName: \"Edit Position\"\n                    });\n                    editPosition(position);\n                  },\n                  disabled: position.size.eq(0) || position.hasPendingChanges,\n                  children: \"Edit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 567,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 566,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"Exchange-list-action\",\n                  onClick: () => {\n                    trackAction(\"Button clicked\", {\n                      buttonName: \"Close Position\"\n                    });\n                    sellPosition(position);\n                  },\n                  disabled: position.size.eq(0) || position.hasPendingChanges,\n                  children: \"Close\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 579,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 578,\n                columnNumber: 19\n              }, this)]\n            }, position.key, true, {\n              fileName: _jsxFileName,\n              lineNumber: 414,\n              columnNumber: 17\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 5\n  }, this);\n}\n\n_s(PositionsList, \"Nc2/KxQ3LW/ONm84ZHhqC66YlbQ=\");\n\n_c = PositionsList;\n\nvar _c;\n\n$RefreshReg$(_c, \"PositionsList\");","map":{"version":3,"names":["React","useState","cx","Tooltip","PositionSeller","PositionEditor","OrdersToa","ImSpinner2","helperToast","bigNumberify","getLiquidationPrice","getUsd","getLeverage","formatAmount","USD_DECIMALS","FUNDING_RATE_PRECISION","SWAP","LONG","SHORT","INCREASE","DECREASE","getOrdersForPosition","position","orders","nativeTokenAddress","length","filter","order","type","hasMatchingIndexToken","indexToken","isNative","address","hasMatchingCollateralToken","collateralToken","isLong","map","sizeDelta","gt","size","error","PositionsList","props","pendingPositions","setPendingPositions","positions","positionsDataIsLoading","positionsMap","infoTokens","active","account","library","pendingTxns","setPendingTxns","setListSection","flagOrdersEnabled","savedIsPnlInLeverage","chainId","setIsWaitingForPluginApproval","approveOrderBook","isPluginApproving","isWaitingForPluginApproval","orderBookApproved","positionRouterApproved","isWaitingForPositionRouterApproval","isPositionRouterApproving","approvePositionRouter","showPnlAfterFees","setMarket","trackAction","usdgSupply","totalTokenWeights","positionToEditKey","setPositionToEditKey","undefined","positionToSellKey","setPositionToSellKey","isPositionEditorVisible","setIsPositionEditorVisible","isPositionSellerVisible","setIsPositionSellerVisible","collateralTokenAddress","setCollateralTokenAddress","ordersToaOpen","setOrdersToaOpen","isHigherSlippageAllowed","setIsHigherSlippageAllowed","editPosition","key","sellPosition","onPositionClick","success","symbol","positionOrders","liquidationPrice","hasPositionProfit","positionDelta","borrowFeeText","fundingRate","borrowFeeRate","mul","div","leverage","positive","negative","collateralAfterFee","hasLowCollateral","collateral","fundingFee","muted","eq","deltaStr","deltaPercentageStr","netValue","deltaBeforeFeesStr","positionFee","deltaAfterFeesStr","deltaAfterFeesPercentageStr","triggerAboveThreshold","triggerPrice","index","markPrice","averagePrice","hasPendingChanges","hasOrderError","find","buttonName"],"sources":["C:/Users/rober/Documents/copiaswaps-client/swaps-client/src/components/Exchange/PositionsList.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport cx from \"classnames\";\n\nimport Tooltip from \"../Tooltip/Tooltip\";\nimport PositionSeller from \"./PositionSeller\";\nimport PositionEditor from \"./PositionEditor\";\nimport OrdersToa from \"./OrdersToa\";\n\nimport { ImSpinner2 } from \"react-icons/im\";\n\nimport {\n  helperToast,\n  bigNumberify,\n  getLiquidationPrice,\n  getUsd,\n  getLeverage,\n  formatAmount,\n  USD_DECIMALS,\n  FUNDING_RATE_PRECISION,\n  SWAP,\n  LONG,\n  SHORT,\n  INCREASE,\n  DECREASE,\n} from \"../../Helpers\";\n\nconst getOrdersForPosition = (position, orders, nativeTokenAddress) => {\n  if (!orders || orders.length === 0) {\n    return [];\n  }\n  /* eslint-disable array-callback-return */\n  return orders\n    .filter((order) => {\n      if (order.type === SWAP) {\n        return false;\n      }\n      const hasMatchingIndexToken =\n        order.indexToken === nativeTokenAddress\n          ? position.indexToken.isNative\n          : order.indexToken === position.indexToken.address;\n      const hasMatchingCollateralToken =\n        order.collateralToken === nativeTokenAddress\n          ? position.collateralToken.isNative\n          : order.collateralToken === position.collateralToken.address;\n      if (order.isLong === position.isLong && hasMatchingIndexToken && hasMatchingCollateralToken) {\n        return true;\n      }\n    })\n    .map((order) => {\n      if (order.type === DECREASE && order.sizeDelta.gt(position.size)) {\n        order.error = \"Order size exceeds position size, order cannot be executed\";\n      }\n      return order;\n    });\n};\n\nexport default function PositionsList(props) {\n  const {\n    pendingPositions,\n    setPendingPositions,\n    positions,\n    positionsDataIsLoading,\n    positionsMap,\n    infoTokens,\n    active,\n    account,\n    library,\n    pendingTxns,\n    setPendingTxns,\n    setListSection,\n    flagOrdersEnabled,\n    savedIsPnlInLeverage,\n    chainId,\n    nativeTokenAddress,\n    orders,\n    setIsWaitingForPluginApproval,\n    approveOrderBook,\n    isPluginApproving,\n    isWaitingForPluginApproval,\n    orderBookApproved,\n    positionRouterApproved,\n    isWaitingForPositionRouterApproval,\n    isPositionRouterApproving,\n    approvePositionRouter,\n    showPnlAfterFees,\n    setMarket,\n    trackAction,\n    usdgSupply,\n    totalTokenWeights,\n  } = props;\n\n  const [positionToEditKey, setPositionToEditKey] = useState(undefined);\n  const [positionToSellKey, setPositionToSellKey] = useState(undefined);\n  const [isPositionEditorVisible, setIsPositionEditorVisible] = useState(undefined);\n  const [isPositionSellerVisible, setIsPositionSellerVisible] = useState(undefined);\n  const [collateralTokenAddress, setCollateralTokenAddress] = useState(undefined);\n  const [ordersToaOpen, setOrdersToaOpen] = useState(false);\n  const [isHigherSlippageAllowed, setIsHigherSlippageAllowed] = useState(false);\n\n  const editPosition = (position) => {\n    setCollateralTokenAddress(position.collateralToken.address);\n    setPositionToEditKey(position.key);\n    setIsPositionEditorVisible(true);\n  };\n\n  const sellPosition = (position) => {\n    setPositionToSellKey(position.key);\n    setIsPositionSellerVisible(true);\n    setIsHigherSlippageAllowed(false);\n  };\n\n  const onPositionClick = (position) => {\n    helperToast.success(`${position.isLong ? \"Long\" : \"Short\"} ${position.indexToken.symbol} market selected`);\n    setMarket(position.isLong ? LONG : SHORT, position.indexToken.address);\n  };\n\n  return (\n    <div className=\"PositionsList\">\n      <PositionEditor\n        pendingPositions={pendingPositions}\n        setPendingPositions={setPendingPositions}\n        positionsMap={positionsMap}\n        positionKey={positionToEditKey}\n        isVisible={isPositionEditorVisible}\n        setIsVisible={setIsPositionEditorVisible}\n        infoTokens={infoTokens}\n        active={active}\n        account={account}\n        library={library}\n        collateralTokenAddress={collateralTokenAddress}\n        pendingTxns={pendingTxns}\n        setPendingTxns={setPendingTxns}\n        getUsd={getUsd}\n        getLeverage={getLeverage}\n        savedIsPnlInLeverage={savedIsPnlInLeverage}\n        positionRouterApproved={positionRouterApproved}\n        isPositionRouterApproving={isPositionRouterApproving}\n        isWaitingForPositionRouterApproval={isWaitingForPositionRouterApproval}\n        approvePositionRouter={approvePositionRouter}\n        chainId={chainId}\n        trackAction={trackAction}\n      />\n      {ordersToaOpen && (\n        <OrdersToa\n          setIsVisible={setOrdersToaOpen}\n          approveOrderBook={approveOrderBook}\n          isPluginApproving={isPluginApproving}\n        />\n      )}\n      {isPositionSellerVisible && (\n        <PositionSeller\n          pendingPositions={pendingPositions}\n          setPendingPositions={setPendingPositions}\n          setIsWaitingForPluginApproval={setIsWaitingForPluginApproval}\n          approveOrderBook={approveOrderBook}\n          isPluginApproving={isPluginApproving}\n          isWaitingForPluginApproval={isWaitingForPluginApproval}\n          orderBookApproved={orderBookApproved}\n          positionsMap={positionsMap}\n          positionKey={positionToSellKey}\n          isVisible={isPositionSellerVisible}\n          setIsVisible={setIsPositionSellerVisible}\n          infoTokens={infoTokens}\n          active={active}\n          account={account}\n          orders={orders}\n          library={library}\n          pendingTxns={pendingTxns}\n          setPendingTxns={setPendingTxns}\n          flagOrdersEnabled={flagOrdersEnabled}\n          savedIsPnlInLeverage={savedIsPnlInLeverage}\n          chainId={chainId}\n          nativeTokenAddress={nativeTokenAddress}\n          setOrdersToaOpen={setOrdersToaOpen}\n          positionRouterApproved={positionRouterApproved}\n          isPositionRouterApproving={isPositionRouterApproving}\n          isWaitingForPositionRouterApproval={isWaitingForPositionRouterApproval}\n          approvePositionRouter={approvePositionRouter}\n          isHigherSlippageAllowed={isHigherSlippageAllowed}\n          setIsHigherSlippageAllowed={setIsHigherSlippageAllowed}\n          trackAction={trackAction}\n          usdgSupply={usdgSupply}\n          totalTokenWeights={totalTokenWeights}\n          showPnlAfterFees={showPnlAfterFees}\n        />\n      )}\n      {positions && (\n        <div className=\"Exchange-list small\">\n          <div>\n            {positions.length === 0 && positionsDataIsLoading && (\n              <div className=\"Exchange-empty-positions-list-note App-card\">Loading...</div>\n            )}\n            {positions.length === 0 && !positionsDataIsLoading && (\n              <div className=\"Exchange-empty-positions-list-note App-card\">No open positions</div>\n            )}\n            {positions.map((position) => {\n              const positionOrders = getOrdersForPosition(position, orders, nativeTokenAddress);\n              const liquidationPrice = getLiquidationPrice(position);\n              const hasPositionProfit = position[showPnlAfterFees ? \"hasProfitAfterFees\" : \"hasProfit\"];\n              const positionDelta =\n                position[showPnlAfterFees ? \"pendingDeltaAfterFees\" : \"pendingDelta\"] || bigNumberify(0);\n              let borrowFeeText;\n              if (position.collateralToken && position.collateralToken.fundingRate) {\n                const borrowFeeRate = position.collateralToken.fundingRate\n                  .mul(position.size)\n                  .mul(24)\n                  .div(FUNDING_RATE_PRECISION);\n                borrowFeeText = `Borrow Fee / Day: $${formatAmount(borrowFeeRate, USD_DECIMALS, 2)}`;\n              }\n\n              return (\n                <div key={position.key} className=\"App-card\">\n                  <div className=\"App-card-title\">\n                    <span className=\"Exchange-list-title\">{position.indexToken.symbol}</span>\n                  </div>\n                  <div className=\"App-card-divider\"></div>\n                  <div className=\"App-card-content\">\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">Leverage</div>\n                      <div>\n                        {formatAmount(position.leverage, 4, 2, true)}x&nbsp;\n                        <span\n                          className={cx(\"Exchange-list-side\", {\n                            positive: position.isLong,\n                            negative: !position.isLong,\n                          })}\n                        >\n                          {position.isLong ? \"Long\" : \"Short\"}\n                        </span>\n                      </div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">Size</div>\n                      <div>${formatAmount(position.size, USD_DECIMALS, 2, true)}</div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">Collateral</div>\n                      <div>\n                        <Tooltip\n                          handle={`$${formatAmount(position.collateralAfterFee, USD_DECIMALS, 2, true)}`}\n                          position=\"right-bottom\"\n                          handleClassName={cx(\"plain\", { negative: position.hasLowCollateral })}\n                          renderContent={() => {\n                            return (\n                              <>\n                                {position.hasLowCollateral && (\n                                  <div>\n                                    WARNING: This position has a low amount of collateral after deducting borrowing\n                                    fees, deposit more collateral to reduce the position's liquidation risk.\n                                    <br />\n                                    <br />\n                                  </div>\n                                )}\n                                Initial Collateral: ${formatAmount(position.collateral, USD_DECIMALS, 2, true)}\n                                <br />\n                                Borrow Fee: ${formatAmount(position.fundingFee, USD_DECIMALS, 2, true)}\n                                {borrowFeeText && <div>{borrowFeeText}</div>}\n                                <br />\n                                Use the \"Edit\" button to deposit or withdraw collateral.\n                              </>\n                            );\n                          }}\n                        />\n                      </div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">PnL</div>\n                      <div>\n                        <span\n                          className={cx(\"Exchange-list-info-label\", {\n                            positive: hasPositionProfit && positionDelta.gt(0),\n                            negative: !hasPositionProfit && positionDelta.gt(0),\n                            muted: positionDelta.eq(0),\n                          })}\n                        >\n                          {position.deltaStr} ({position.deltaPercentageStr})\n                        </span>\n                      </div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">Net Value</div>\n                      <div>\n                        <Tooltip\n                          handle={`$${formatAmount(position.netValue, USD_DECIMALS, 2, true)}`}\n                          position=\"right-bottom\"\n                          handleClassName=\"plain\"\n                          renderContent={() => {\n                            return (\n                              <>\n                                Net Value:{\" \"}\n                                {showPnlAfterFees\n                                  ? \"Initial Collateral - Fees + PnL\"\n                                  : \"Initial Collateral - Borrow Fee + PnL\"}\n                                <br />\n                                <br />\n                                Initial Collateral: ${formatAmount(position.collateral, USD_DECIMALS, 2, true)}\n                                <br />\n                                PnL: {position.deltaBeforeFeesStr}\n                                <br />\n                                Borrow Fee: ${formatAmount(position.fundingFee, USD_DECIMALS, 2, true)}\n                                <br />\n                                Open + Close fee: ${formatAmount(position.positionFee, USD_DECIMALS, 2, true)}\n                                <br />\n                                PnL After Fees: {position.deltaAfterFeesStr} ({position.deltaAfterFeesPercentageStr})\n                              </>\n                            );\n                          }}\n                        />\n                      </div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">Orders</div>\n                      <div>\n                        {positionOrders.length === 0 && \"None\"}\n                        {positionOrders.map((order) => {\n                          return (\n                            <div key={`${order.isLong}-${order.type}-${order.index}`} className=\"Position-list-order\">\n                              {order.triggerAboveThreshold ? \">\" : \"<\"} {formatAmount(order.triggerPrice, 30, 2, true)}:\n                              {order.type === INCREASE ? \" +\" : \" -\"}${formatAmount(order.sizeDelta, 30, 2, true)}\n                              {order.error && (\n                                <>\n                                  , <span className=\"negative\">{order.error}</span>\n                                </>\n                              )}\n                            </div>\n                          );\n                        })}\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"App-card-divider\"></div>\n                  <div className=\"App-card-content\">\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">Mark Price</div>\n                      <div>${formatAmount(position.markPrice, USD_DECIMALS, 2, true)}</div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">Entry Price</div>\n                      <div>${formatAmount(position.averagePrice, USD_DECIMALS, 2, true)}</div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">Liq. Price</div>\n                      <div>${formatAmount(liquidationPrice, USD_DECIMALS, 2, true)}</div>\n                    </div>\n                  </div>\n                  <div className=\"App-card-divider\"></div>\n                  <div className=\"App-card-options\">\n                    <button\n                      className=\"App-button-option App-card-option\"\n                      onClick={() => editPosition(position)}\n                      disabled={position.size.eq(0) || position.hasPendingChanges}\n                    >\n                      Edit\n                    </button>\n                    <button\n                      className=\"App-button-option App-card-option\"\n                      onClick={() => sellPosition(position)}\n                      disabled={position.size.eq(0) || position.hasPendingChanges}\n                    >\n                      Close\n                    </button>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      )}\n      <div className=\"large App-box\">\n        <table className=\"Exchange-list large\">\n          <tbody>\n            <tr className=\"Exchange-list-header\">\n              <th>Position</th>\n              <th>Net Value</th>\n              <th>Size</th>\n              <th>Collateral</th>\n              <th>Mark Price</th>\n              <th>Entry Price</th>\n              <th>Liq. Price</th>\n              <th></th>\n              <th></th>\n            </tr>\n            {positions.length === 0 && positionsDataIsLoading && (\n              <tr>\n                <td colSpan=\"15\">\n                  <div className=\"Exchange-empty-positions-list-note\">Loading...</div>\n                </td>\n              </tr>\n            )}\n            {positions.length === 0 && !positionsDataIsLoading && (\n              <tr>\n                <td colSpan=\"15\">\n                  <div className=\"Exchange-empty-positions-list-note\">No open positions</div>\n                </td>\n              </tr>\n            )}\n            {positions.map((position) => {\n              const liquidationPrice = getLiquidationPrice(position) || bigNumberify(0);\n              const positionOrders = getOrdersForPosition(position, orders, nativeTokenAddress);\n              const hasOrderError = !!positionOrders.find((order) => order.error);\n              const hasPositionProfit = position[showPnlAfterFees ? \"hasProfitAfterFees\" : \"hasProfit\"];\n              const positionDelta =\n                position[showPnlAfterFees ? \"pendingDeltaAfterFees\" : \"pendingDelta\"] || bigNumberify(0);\n              let borrowFeeText;\n              if (position.collateralToken && position.collateralToken.fundingRate) {\n                const borrowFeeRate = position.collateralToken.fundingRate\n                  .mul(position.size)\n                  .mul(24)\n                  .div(FUNDING_RATE_PRECISION);\n                borrowFeeText = `Borrow Fee / Day: $${formatAmount(borrowFeeRate, USD_DECIMALS, 2)}`;\n              }\n\n              return (\n                <tr key={position.key}>\n                  <td className=\"clickable\" onClick={() => onPositionClick(position)}>\n                    <div className=\"Exchange-list-title\">\n                      {position.indexToken.symbol}\n                      {position.hasPendingChanges && <ImSpinner2 className=\"spin position-loading-icon\" />}\n                    </div>\n                    <div className=\"Exchange-list-info-label\">\n                      {position.leverage && (\n                        <span className=\"muted\">{formatAmount(position.leverage, 4, 2, true)}x&nbsp;</span>\n                      )}\n                      <span className={cx({ positive: position.isLong, negative: !position.isLong })}>\n                        {position.isLong ? \"Long\" : \"Short\"}\n                      </span>\n                    </div>\n                  </td>\n                  <td>\n                    <div>\n                      {!position.netValue && \"Opening...\"}\n                      {position.netValue && (\n                        <Tooltip\n                          handle={`$${formatAmount(position.netValue, USD_DECIMALS, 2, true)}`}\n                          position=\"left-bottom\"\n                          handleClassName=\"plain\"\n                          renderContent={() => {\n                            return (\n                              <>\n                                Net Value:{\" \"}\n                                {showPnlAfterFees\n                                  ? \"Initial Collateral - Fees + PnL\"\n                                  : \"Initial Collateral - Borrow Fee + PnL\"}\n                                <br />\n                                <br />\n                                Initial Collateral: ${formatAmount(position.collateral, USD_DECIMALS, 2, true)}\n                                <br />\n                                PnL: {position.deltaBeforeFeesStr}\n                                <br />\n                                Borrow Fee: ${formatAmount(position.fundingFee, USD_DECIMALS, 2, true)}\n                                <br />\n                                Open + Close fee: ${formatAmount(position.positionFee, USD_DECIMALS, 2, true)}\n                                <br />\n                                <br />\n                                PnL After Fees: {position.deltaAfterFeesStr} ({position.deltaAfterFeesPercentageStr})\n                              </>\n                            );\n                          }}\n                        />\n                      )}\n                    </div>\n                    {position.deltaStr && (\n                      <div\n                        className={cx(\"Exchange-list-info-label\", {\n                          positive: hasPositionProfit && positionDelta.gt(0),\n                          negative: !hasPositionProfit && positionDelta.gt(0),\n                          muted: positionDelta.eq(0),\n                        })}\n                      >\n                        {position.deltaStr} ({position.deltaPercentageStr})\n                      </div>\n                    )}\n                  </td>\n                  <td>\n                    <div>${formatAmount(position.size, USD_DECIMALS, 2, true)}</div>\n                    {positionOrders.length > 0 && (\n                      <div onClick={() => setListSection && setListSection(\"Orders\")}>\n                        <Tooltip\n                          handle={`Orders (${positionOrders.length})`}\n                          position=\"left-bottom\"\n                          handleClassName={cx(\n                            [\"Exchange-list-info-label\", \"Exchange-position-list-orders\", \"plain\", \"clickable\"],\n                            { muted: !hasOrderError, negative: hasOrderError }\n                          )}\n                          renderContent={() => {\n                            return (\n                              <>\n                                <strong>Active Orders</strong>\n                                {positionOrders.map((order) => {\n                                  return (\n                                    <div\n                                      key={`${order.isLong}-${order.type}-${order.index}`}\n                                      className=\"Position-list-order\"\n                                    >\n                                      {order.triggerAboveThreshold ? \">\" : \"<\"}{\" \"}\n                                      {formatAmount(order.triggerPrice, 30, 2, true)}:\n                                      {order.type === INCREASE ? \" +\" : \" -\"}$\n                                      {formatAmount(order.sizeDelta, 30, 2, true)}\n                                      {order.error && (\n                                        <>\n                                          , <span className=\"negative\">{order.error}</span>\n                                        </>\n                                      )}\n                                    </div>\n                                  );\n                                })}\n                              </>\n                            );\n                          }}\n                        />\n                      </div>\n                    )}\n                  </td>\n                  <td>\n                    <Tooltip\n                      handle={`$${formatAmount(position.collateralAfterFee, USD_DECIMALS, 2, true)}`}\n                      position=\"left-bottom\"\n                      handleClassName={cx(\"plain\", { negative: position.hasLowCollateral })}\n                      renderContent={() => {\n                        return (\n                          <>\n                            {position.hasLowCollateral && (\n                              <div>\n                                WARNING: This position has a low amount of collateral after deducting borrowing fees,\n                                deposit more collateral to reduce the position's liquidation risk.\n                                <br />\n                                <br />\n                              </div>\n                            )}\n                            Initial Collateral: ${formatAmount(position.collateral, USD_DECIMALS, 2, true)}\n                            <br />\n                            Borrow Fee: ${formatAmount(position.fundingFee, USD_DECIMALS, 2, true)}\n                            {borrowFeeText && <div>{borrowFeeText}</div>}\n                            <br />\n                            Use the \"Edit\" button to deposit or withdraw collateral.\n                          </>\n                        );\n                      }}\n                    />\n                  </td>\n                  <td className=\"clickable\" onClick={() => onPositionClick(position)}>\n                    <Tooltip\n                      handle={`$${formatAmount(position.markPrice, USD_DECIMALS, 2, true)}`}\n                      position=\"left-bottom\"\n                      handleClassName=\"plain clickable\"\n                      renderContent={() => {\n                        return (\n                          <>\n                            Click on a row to select the position's market, then use the swap box to increase your\n                            position size if needed.\n                            <br />\n                            <br />\n                            Use the \"Close\" button to reduce your position size, or to set stop-loss / take-profit\n                            orders.\n                          </>\n                        );\n                      }}\n                    />\n                  </td>\n                  <td className=\"clickable\" onClick={() => onPositionClick(position)}>\n                    ${formatAmount(position.averagePrice, USD_DECIMALS, 2, true)}\n                  </td>\n                  <td className=\"clickable\" onClick={() => onPositionClick(position)}>\n                    ${formatAmount(liquidationPrice, USD_DECIMALS, 2, true)}\n                  </td>\n                  <td>\n                    <button\n                      className=\"Exchange-list-action\"\n                      onClick={() => {\n                        trackAction(\"Button clicked\", { buttonName: \"Edit Position\" });\n                        editPosition(position);\n                      }}\n                      disabled={position.size.eq(0) || position.hasPendingChanges}\n                    >\n                      Edit\n                    </button>\n                  </td>\n                  <td>\n                    <button\n                      className=\"Exchange-list-action\"\n                      onClick={() => {\n                        trackAction(\"Button clicked\", { buttonName: \"Close Position\" });\n                        sellPosition(position);\n                      }}\n                      disabled={position.size.eq(0) || position.hasPendingChanges}\n                    >\n                      Close\n                    </button>\n                  </td>\n                </tr>\n              );\n            })}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}