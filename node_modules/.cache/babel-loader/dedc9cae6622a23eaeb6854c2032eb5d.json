{"ast":null,"code":"import hash from './libs/hash';\n\nvar Cache =\n/** @class */\nfunction () {\n  function Cache(initialData) {\n    if (initialData === void 0) {\n      initialData = {};\n    }\n\n    this.__cache = new Map(Object.entries(initialData));\n    this.__listeners = [];\n  }\n\n  Cache.prototype.get = function (key) {\n    var _key = this.serializeKey(key)[0];\n    return this.__cache.get(_key);\n  };\n\n  Cache.prototype.set = function (key, value) {\n    var _key = this.serializeKey(key)[0];\n\n    this.__cache.set(_key, value);\n\n    this.notify();\n  };\n\n  Cache.prototype.keys = function () {\n    return Array.from(this.__cache.keys());\n  };\n\n  Cache.prototype.has = function (key) {\n    var _key = this.serializeKey(key)[0];\n    return this.__cache.has(_key);\n  };\n\n  Cache.prototype.clear = function () {\n    this.__cache.clear();\n\n    this.notify();\n  };\n\n  Cache.prototype.delete = function (key) {\n    var _key = this.serializeKey(key)[0];\n\n    this.__cache.delete(_key);\n\n    this.notify();\n  }; // TODO: introduce namespace for the cache\n\n\n  Cache.prototype.serializeKey = function (key) {\n    var args = null;\n\n    if (typeof key === 'function') {\n      try {\n        key = key();\n      } catch (err) {\n        // dependencies not ready\n        key = '';\n      }\n    }\n\n    if (Array.isArray(key)) {\n      // args array\n      args = key;\n      key = hash(key);\n    } else {\n      // convert null to ''\n      key = String(key || '');\n    }\n\n    var errorKey = key ? 'err@' + key : '';\n    var isValidatingKey = key ? 'validating@' + key : '';\n    return [key, args, errorKey, isValidatingKey];\n  };\n\n  Cache.prototype.subscribe = function (listener) {\n    var _this = this;\n\n    if (typeof listener !== 'function') {\n      throw new Error('Expected the listener to be a function.');\n    }\n\n    var isSubscribed = true;\n\n    this.__listeners.push(listener);\n\n    return function () {\n      if (!isSubscribed) return;\n      isSubscribed = false;\n\n      var index = _this.__listeners.indexOf(listener);\n\n      if (index > -1) {\n        _this.__listeners[index] = _this.__listeners[_this.__listeners.length - 1];\n        _this.__listeners.length--;\n      }\n    };\n  }; // Notify Cache subscribers about a change in the cache\n\n\n  Cache.prototype.notify = function () {\n    for (var _i = 0, _a = this.__listeners; _i < _a.length; _i++) {\n      var listener = _a[_i];\n      listener();\n    }\n  };\n\n  return Cache;\n}();\n\nexport default Cache;","map":{"version":3,"names":["hash","Cache","initialData","__cache","Map","Object","entries","__listeners","prototype","get","key","_key","serializeKey","set","value","notify","keys","Array","from","has","clear","delete","args","err","isArray","String","errorKey","isValidatingKey","subscribe","listener","_this","Error","isSubscribed","push","index","indexOf","length","_i","_a"],"sources":["C:/Users/rober/Documents/swaps-client/node_modules/swr/esm/cache.js"],"sourcesContent":["import hash from './libs/hash';\nvar Cache = /** @class */ (function () {\n    function Cache(initialData) {\n        if (initialData === void 0) { initialData = {}; }\n        this.__cache = new Map(Object.entries(initialData));\n        this.__listeners = [];\n    }\n    Cache.prototype.get = function (key) {\n        var _key = this.serializeKey(key)[0];\n        return this.__cache.get(_key);\n    };\n    Cache.prototype.set = function (key, value) {\n        var _key = this.serializeKey(key)[0];\n        this.__cache.set(_key, value);\n        this.notify();\n    };\n    Cache.prototype.keys = function () {\n        return Array.from(this.__cache.keys());\n    };\n    Cache.prototype.has = function (key) {\n        var _key = this.serializeKey(key)[0];\n        return this.__cache.has(_key);\n    };\n    Cache.prototype.clear = function () {\n        this.__cache.clear();\n        this.notify();\n    };\n    Cache.prototype.delete = function (key) {\n        var _key = this.serializeKey(key)[0];\n        this.__cache.delete(_key);\n        this.notify();\n    };\n    // TODO: introduce namespace for the cache\n    Cache.prototype.serializeKey = function (key) {\n        var args = null;\n        if (typeof key === 'function') {\n            try {\n                key = key();\n            }\n            catch (err) {\n                // dependencies not ready\n                key = '';\n            }\n        }\n        if (Array.isArray(key)) {\n            // args array\n            args = key;\n            key = hash(key);\n        }\n        else {\n            // convert null to ''\n            key = String(key || '');\n        }\n        var errorKey = key ? 'err@' + key : '';\n        var isValidatingKey = key ? 'validating@' + key : '';\n        return [key, args, errorKey, isValidatingKey];\n    };\n    Cache.prototype.subscribe = function (listener) {\n        var _this = this;\n        if (typeof listener !== 'function') {\n            throw new Error('Expected the listener to be a function.');\n        }\n        var isSubscribed = true;\n        this.__listeners.push(listener);\n        return function () {\n            if (!isSubscribed)\n                return;\n            isSubscribed = false;\n            var index = _this.__listeners.indexOf(listener);\n            if (index > -1) {\n                _this.__listeners[index] = _this.__listeners[_this.__listeners.length - 1];\n                _this.__listeners.length--;\n            }\n        };\n    };\n    // Notify Cache subscribers about a change in the cache\n    Cache.prototype.notify = function () {\n        for (var _i = 0, _a = this.__listeners; _i < _a.length; _i++) {\n            var listener = _a[_i];\n            listener();\n        }\n    };\n    return Cache;\n}());\nexport default Cache;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}