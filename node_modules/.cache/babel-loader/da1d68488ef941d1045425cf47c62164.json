{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rober\\\\Documents\\\\copiaswaps-client\\\\swaps-client\\\\src\\\\views\\\\Actions\\\\Actions.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport useSWR from \"swr\";\nimport { ethers } from \"ethers\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { useParams } from \"react-router-dom\";\nimport \"./Actions.css\";\nimport { getContract } from \"../../Addresses\";\nimport { formatAmount, fetcher, getTokenInfo, useChainId, useAccountOrders } from \"../../Helpers\";\nimport { useInfoTokens } from \"../../hooks/useInfoTokens\";\nimport { getToken, getTokens, getWhitelistedTokens } from \"../../data/Tokens\";\nimport { getPositions, getPositionQuery } from \"../Exchange/Exchange\";\nimport PositionsList from \"../../components/Exchange/PositionsList\";\nimport OrdersList from \"../../components/Exchange/OrdersList\";\nimport TradeHistory from \"../../components/Exchange/TradeHistory\";\nimport Reader from \"../../abis/Reader.json\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst USD_DECIMALS = 30;\nexport default function Actions(props) {\n  _s();\n\n  const {\n    trackAction\n  } = props;\n  const {\n    account\n  } = useParams();\n  const {\n    active,\n    library\n  } = useWeb3React();\n  const {\n    chainId\n  } = useChainId();\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n  const vaultAddress = getContract(chainId, \"Vault\");\n  const readerAddress = getContract(chainId, \"Reader\");\n  let checkSummedAccount = \"\";\n\n  if (ethers.utils.isAddress(account)) {\n    checkSummedAccount = ethers.utils.getAddress(account);\n  }\n\n  const tokens = getTokens(chainId);\n  const whitelistedTokens = getWhitelistedTokens(chainId);\n  const positionQuery = getPositionQuery(whitelistedTokens, nativeTokenAddress);\n  const whitelistedTokenAddresses = whitelistedTokens.map(token => token.address);\n  const tokenAddresses = tokens.map(token => token.address);\n  const {\n    data: tokenBalances\n  } = useSWR([active, chainId, readerAddress, \"getTokenBalances\", account], {\n    fetcher: fetcher(library, Reader, [tokenAddresses])\n  });\n  const {\n    data: positionData\n  } = useSWR([active, chainId, readerAddress, \"getPositions\", vaultAddress, account], {\n    fetcher: fetcher(library, Reader, [positionQuery.collateralTokens, positionQuery.indexTokens, positionQuery.isLong])\n  });\n  const {\n    data: fundingRateInfo\n  } = useSWR([active, chainId, readerAddress, \"getFundingRates\"], {\n    fetcher: fetcher(library, Reader, [vaultAddress, nativeTokenAddress, whitelistedTokenAddresses])\n  });\n  const {\n    infoTokens\n  } = useInfoTokens(library, chainId, active, tokenBalances, fundingRateInfo);\n  const {\n    positions,\n    positionsMap\n  } = getPositions(chainId, positionQuery, positionData, infoTokens, false, false, checkSummedAccount, undefined, undefined);\n  const flagOrdersEnabled = true;\n  const [orders, updateOrders] = useAccountOrders(flagOrdersEnabled, checkSummedAccount);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Actions\",\n    children: [checkSummedAccount.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Actions-section\",\n      children: [\"Account: \", checkSummedAccount]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 41\n    }, this), checkSummedAccount.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Actions-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Actions-title\",\n        children: \"Positions\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(PositionsList, {\n        positions: positions,\n        positionsMap: positionsMap,\n        infoTokens: infoTokens,\n        active: active,\n        orders: orders,\n        account: checkSummedAccount,\n        library: library,\n        flagOrdersEnabled: false,\n        savedIsPnlInLeverage: false,\n        chainId: chainId,\n        nativeTokenAddress: nativeTokenAddress,\n        showPnlAfterFees: false,\n        trackAction: trackAction\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }, this), flagOrdersEnabled && checkSummedAccount.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Actions-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Actions-title\",\n        children: \"Orders\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(OrdersList, {\n        account: checkSummedAccount,\n        infoTokens: infoTokens,\n        positionsMap: positionsMap,\n        chainId: chainId,\n        orders: orders,\n        updateOrders: updateOrders,\n        hideActions: true,\n        trackAction: trackAction\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Actions-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Actions-title\",\n        children: \"Actions\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TradeHistory, {\n        account: checkSummedAccount,\n        infoTokens: infoTokens,\n        getTokenInfo: getTokenInfo,\n        chainId: chainId,\n        nativeTokenAddress: nativeTokenAddress\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Actions, \"btdq/H1QIv4ttxafZHnIs2UaoWQ=\", false, function () {\n  return [useParams, useWeb3React, useChainId, useSWR, useSWR, useSWR, useInfoTokens, useAccountOrders];\n});\n\n_c = Actions;\n\nvar _c;\n\n$RefreshReg$(_c, \"Actions\");","map":{"version":3,"names":["React","useSWR","ethers","useWeb3React","useParams","getContract","formatAmount","fetcher","getTokenInfo","useChainId","useAccountOrders","useInfoTokens","getToken","getTokens","getWhitelistedTokens","getPositions","getPositionQuery","PositionsList","OrdersList","TradeHistory","Reader","USD_DECIMALS","Actions","props","trackAction","account","active","library","chainId","nativeTokenAddress","vaultAddress","readerAddress","checkSummedAccount","utils","isAddress","getAddress","tokens","whitelistedTokens","positionQuery","whitelistedTokenAddresses","map","token","address","tokenAddresses","data","tokenBalances","positionData","collateralTokens","indexTokens","isLong","fundingRateInfo","infoTokens","positions","positionsMap","undefined","flagOrdersEnabled","orders","updateOrders","length"],"sources":["C:/Users/rober/Documents/copiaswaps-client/swaps-client/src/views/Actions/Actions.js"],"sourcesContent":["import React from \"react\";\nimport useSWR from \"swr\";\nimport { ethers } from \"ethers\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { useParams } from \"react-router-dom\";\n\nimport \"./Actions.css\";\n\nimport { getContract } from \"../../Addresses\";\nimport { formatAmount, fetcher, getTokenInfo, useChainId, useAccountOrders } from \"../../Helpers\";\n\nimport { useInfoTokens } from \"../../hooks/useInfoTokens\";\nimport { getToken, getTokens, getWhitelistedTokens } from \"../../data/Tokens\";\nimport { getPositions, getPositionQuery } from \"../Exchange/Exchange\";\n\nimport PositionsList from \"../../components/Exchange/PositionsList\";\nimport OrdersList from \"../../components/Exchange/OrdersList\";\n\nimport TradeHistory from \"../../components/Exchange/TradeHistory\";\nimport Reader from \"../../abis/Reader.json\";\n\nconst USD_DECIMALS = 30;\n\nexport default function Actions(props) {\n  const { trackAction } = props;\n  const { account } = useParams();\n  const { active, library } = useWeb3React();\n\n  const { chainId } = useChainId();\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n  const vaultAddress = getContract(chainId, \"Vault\");\n  const readerAddress = getContract(chainId, \"Reader\");\n\n  let checkSummedAccount = \"\";\n  if (ethers.utils.isAddress(account)) {\n    checkSummedAccount = ethers.utils.getAddress(account);\n  }\n\n  const tokens = getTokens(chainId);\n  const whitelistedTokens = getWhitelistedTokens(chainId);\n  const positionQuery = getPositionQuery(whitelistedTokens, nativeTokenAddress);\n\n  const whitelistedTokenAddresses = whitelistedTokens.map((token) => token.address);\n  const tokenAddresses = tokens.map((token) => token.address);\n  const { data: tokenBalances } = useSWR([active, chainId, readerAddress, \"getTokenBalances\", account], {\n    fetcher: fetcher(library, Reader, [tokenAddresses]),\n  });\n\n  const { data: positionData } = useSWR([active, chainId, readerAddress, \"getPositions\", vaultAddress, account], {\n    fetcher: fetcher(library, Reader, [\n      positionQuery.collateralTokens,\n      positionQuery.indexTokens,\n      positionQuery.isLong,\n    ]),\n  });\n\n  const { data: fundingRateInfo } = useSWR([active, chainId, readerAddress, \"getFundingRates\"], {\n    fetcher: fetcher(library, Reader, [vaultAddress, nativeTokenAddress, whitelistedTokenAddresses]),\n  });\n\n  const { infoTokens } = useInfoTokens(library, chainId, active, tokenBalances, fundingRateInfo);\n  const { positions, positionsMap } = getPositions(\n    chainId,\n    positionQuery,\n    positionData,\n    infoTokens,\n    false,\n    false,\n    checkSummedAccount,\n    undefined,\n    undefined\n  );\n\n  const flagOrdersEnabled = true;\n  const [orders, updateOrders] = useAccountOrders(flagOrdersEnabled, checkSummedAccount);\n\n  return (\n    <div className=\"Actions\">\n      {checkSummedAccount.length > 0 && <div className=\"Actions-section\">Account: {checkSummedAccount}</div>}\n      {checkSummedAccount.length > 0 && (\n        <div className=\"Actions-section\">\n          <div className=\"Actions-title\">Positions</div>\n          <PositionsList\n            positions={positions}\n            positionsMap={positionsMap}\n            infoTokens={infoTokens}\n            active={active}\n            orders={orders}\n            account={checkSummedAccount}\n            library={library}\n            flagOrdersEnabled={false}\n            savedIsPnlInLeverage={false}\n            chainId={chainId}\n            nativeTokenAddress={nativeTokenAddress}\n            showPnlAfterFees={false}\n            trackAction={trackAction}\n          />\n        </div>\n      )}\n      {flagOrdersEnabled && checkSummedAccount.length > 0 && (\n        <div className=\"Actions-section\">\n          <div className=\"Actions-title\">Orders</div>\n          <OrdersList\n            account={checkSummedAccount}\n            infoTokens={infoTokens}\n            positionsMap={positionsMap}\n            chainId={chainId}\n            orders={orders}\n            updateOrders={updateOrders}\n            hideActions\n            trackAction={trackAction}\n          />\n        </div>\n      )}\n      <div className=\"Actions-section\">\n        <div className=\"Actions-title\">Actions</div>\n        <TradeHistory\n          account={checkSummedAccount}\n          infoTokens={infoTokens}\n          getTokenInfo={getTokenInfo}\n          chainId={chainId}\n          nativeTokenAddress={nativeTokenAddress}\n        />\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}