{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rober\\\\Documents\\\\copiaswaps-client\\\\swaps-client\\\\src\\\\components\\\\Exchange\\\\OrdersList.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useCallback } from \"react\";\nimport { SWAP, INCREASE, DECREASE, USD_DECIMALS, formatAmount, TRIGGER_PREFIX_ABOVE, TRIGGER_PREFIX_BELOW, getExchangeRateDisplay, getTokenInfo, getExchangeRate, getPositionKey } from \"../../Helpers.js\";\nimport { cancelSwapOrder, cancelIncreaseOrder, cancelDecreaseOrder } from \"../../Api\";\nimport { getContract } from \"../../Addresses\";\nimport Tooltip from \"../Tooltip/Tooltip\";\nimport OrderEditor from \"./OrderEditor\";\nimport \"./OrdersList.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction getPositionForOrder(account, order, positionsMap) {\n  const key = getPositionKey(account, order.collateralToken, order.indexToken, order.isLong);\n  const position = positionsMap[key];\n  return position && position.size && position.size.gt(0) ? position : null;\n}\n\nexport default function OrdersList(props) {\n  _s();\n\n  const {\n    account,\n    library,\n    setPendingTxns,\n    pendingTxns,\n    infoTokens,\n    positionsMap,\n    totalTokenWeights,\n    usdgSupply,\n    orders,\n    hideActions,\n    chainId,\n    trackAction\n  } = props;\n  const [editingOrder, setEditingOrder] = useState(null);\n  const onCancelClick = useCallback(order => {\n    let func;\n\n    if (order.type === SWAP) {\n      func = cancelSwapOrder;\n    } else if (order.type === INCREASE) {\n      func = cancelIncreaseOrder;\n    } else if (order.type === DECREASE) {\n      func = cancelDecreaseOrder;\n    }\n\n    return func(chainId, library, order.index, {\n      successMsg: \"Order cancelled.\",\n      failMsg: \"Cancel failed.\",\n      sentMsg: \"Cancel submitted.\",\n      pendingTxns,\n      setPendingTxns\n    });\n  }, [library, pendingTxns, setPendingTxns, chainId]);\n  const onEditClick = useCallback(order => {\n    setEditingOrder(order);\n  }, [setEditingOrder]);\n  const renderHead = useCallback(() => {\n    return /*#__PURE__*/_jsxDEV(\"tr\", {\n      className: \"Exchange-list-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"th\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Type\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Order\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Price\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Mark Price\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n        colSpan: \"2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this);\n  }, []);\n  const renderEmptyRow = useCallback(() => {\n    if (orders && orders.length) {\n      return null;\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"tr\", {\n      children: /*#__PURE__*/_jsxDEV(\"td\", {\n        colSpan: \"5\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"Exchange-empty-positions-list-note\",\n          children: \"No open orders\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this);\n  }, [orders]);\n  const renderActions = useCallback(order => {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"Exchange-list-action\",\n          onClick: () => onEditClick(order),\n          children: \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"Exchange-list-action\",\n          onClick: () => onCancelClick(order),\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true);\n  }, [onEditClick, onCancelClick]);\n  const renderLargeList = useCallback(() => {\n    if (!orders || !orders.length) {\n      return null;\n    }\n\n    return orders.map(order => {\n      if (order.type === SWAP) {\n        const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n        const fromTokenInfo = getTokenInfo(infoTokens, order.path[0], true, nativeTokenAddress);\n        const toTokenInfo = getTokenInfo(infoTokens, order.path[order.path.length - 1], order.shouldUnwrap, nativeTokenAddress);\n        const markExchangeRate = getExchangeRate(fromTokenInfo, toTokenInfo);\n        return /*#__PURE__*/_jsxDEV(\"tr\", {\n          className: \"Exchange-list-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"Exchange-list-item-type\",\n            children: \"Limit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: [\"Swap\", \" \", formatAmount(order.amountIn, fromTokenInfo.decimals, fromTokenInfo.isStable || fromTokenInfo.isUsdg ? 2 : 4, true), \" \", fromTokenInfo.symbol, \" for\", \" \", formatAmount(order.minOut, toTokenInfo.decimals, toTokenInfo.isStable || toTokenInfo.isUsdg ? 2 : 4, true), \" \", toTokenInfo.symbol]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(Tooltip, {\n              handle: getExchangeRateDisplay(order.triggerRatio, fromTokenInfo, toTokenInfo),\n              renderContent: () => `\n                  You will receive at least ${formatAmount(order.minOut, toTokenInfo.decimals, toTokenInfo.isStable || toTokenInfo.isUsdg ? 2 : 4, true)} ${toTokenInfo.symbol} if this order is executed. The execution price may vary depending on swap fees at the time the order is executed.\n                `\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: getExchangeRateDisplay(markExchangeRate, fromTokenInfo, toTokenInfo, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 13\n          }, this), !hideActions && renderActions(order)]\n        }, `${order.type}-${order.index}`, true, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this);\n      }\n\n      const indexToken = getTokenInfo(infoTokens, order.indexToken);\n      const maximisePrice = order.type === INCREASE && order.isLong || order.type === DECREASE && !order.isLong;\n      const markPrice = maximisePrice ? indexToken.contractMaxPrice : indexToken.contractMinPrice;\n      const triggerPricePrefix = order.triggerAboveThreshold ? TRIGGER_PREFIX_ABOVE : TRIGGER_PREFIX_BELOW;\n      const indexTokenSymbol = indexToken.isWrapped ? indexToken.baseSymbol : indexToken.symbol;\n      let error;\n\n      if (order.type === DECREASE) {\n        const positionForOrder = getPositionForOrder(account, order, positionsMap);\n\n        if (!positionForOrder) {\n          error = \"No open position, order cannot be executed\";\n        } else if (positionForOrder.size.lt(order.sizeDelta)) {\n          error = \"Order size exceeds position size, order cannot be executed\";\n        }\n      }\n\n      return /*#__PURE__*/_jsxDEV(\"tr\", {\n        className: \"Exchange-list-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"td\", {\n          className: \"Exchange-list-item-type\",\n          children: order.type === INCREASE ? \"Limit\" : \"Trigger\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: [order.type === INCREASE ? \"Increase\" : \"Decrease\", \" \", indexTokenSymbol, \" \", order.isLong ? \"Long\" : \"Short\", \"\\xA0by $\", formatAmount(order.sizeDelta, USD_DECIMALS, 2, true), error && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"Exchange-list-item-error\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 23\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: [triggerPricePrefix, \" \", formatAmount(order.triggerPrice, USD_DECIMALS, 2, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: /*#__PURE__*/_jsxDEV(Tooltip, {\n            handle: formatAmount(markPrice, USD_DECIMALS, 2, true),\n            position: \"right-bottom\",\n            renderContent: () => {\n              return /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: \"The price that the order can be executed at may differ slightly from the chart price as market orders can change the price while limit orders cannot.\"\n              }, void 0, false);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 11\n        }, this), !hideActions && renderActions(order)]\n      }, `${order.isLong}-${order.type}-${order.index}`, true, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 9\n      }, this);\n    });\n  }, [orders, renderActions, infoTokens, positionsMap, hideActions, chainId, account]);\n  const renderSmallList = useCallback(() => {\n    if (!orders || !orders.length) {\n      return null;\n    }\n\n    return orders.map(order => {\n      if (order.type === SWAP) {\n        const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n        const fromTokenInfo = getTokenInfo(infoTokens, order.path[0], true, nativeTokenAddress);\n        const toTokenInfo = getTokenInfo(infoTokens, order.path[order.path.length - 1], order.shouldUnwrap, nativeTokenAddress);\n        const markExchangeRate = getExchangeRate(fromTokenInfo, toTokenInfo);\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"App-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"App-card-title-small\",\n            children: [\"Swap \", formatAmount(order.amountIn, fromTokenInfo.decimals, fromTokenInfo.isStable ? 2 : 4, true), \" \", fromTokenInfo.symbol, \" for\", \" \", formatAmount(order.minOut, toTokenInfo.decimals, toTokenInfo.isStable ? 2 : 4, true), \" \", toTokenInfo.symbol]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"App-card-divider\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"App-card-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"App-card-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"label\",\n                children: \"Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(Tooltip, {\n                  position: \"right-bottom\",\n                  handle: getExchangeRateDisplay(order.triggerRatio, fromTokenInfo, toTokenInfo),\n                  renderContent: () => `\n                    You will receive at least ${formatAmount(order.minOut, toTokenInfo.decimals, toTokenInfo.isStable || toTokenInfo.isUsdg ? 2 : 4, true)} ${toTokenInfo.symbol} if this order is executed. The exact execution price may vary depending on fees at the time the order is executed.\n                  `\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 267,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 266,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"App-card-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"label\",\n                children: \"Mark Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 284,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: getExchangeRateDisplay(markExchangeRate, fromTokenInfo, toTokenInfo)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 15\n            }, this), !hideActions && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"App-card-divider\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"App-card-options\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"App-button-option App-card-option\",\n                  onClick: () => onEditClick(order),\n                  children: \"Edit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 291,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"App-button-option App-card-option\",\n                  onClick: () => onCancelClick(order),\n                  children: \"Cancel\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 294,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 290,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 13\n          }, this)]\n        }, `${order.type}-${order.index}`, true, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 11\n        }, this);\n      }\n\n      const indexToken = getTokenInfo(infoTokens, order.indexToken);\n      const maximisePrice = order.type === INCREASE && order.isLong || order.type === DECREASE && !order.isLong;\n      const markPrice = maximisePrice ? indexToken.contractMaxPrice : indexToken.contractMinPrice;\n      const triggerPricePrefix = order.triggerAboveThreshold ? TRIGGER_PREFIX_ABOVE : TRIGGER_PREFIX_BELOW;\n      const indexTokenSymbol = indexToken.isWrapped ? indexToken.baseSymbol : indexToken.symbol;\n      let error;\n\n      if (order.type === DECREASE) {\n        const positionForOrder = getPositionForOrder(account, order, positionsMap);\n\n        if (!positionForOrder) {\n          error = \"There is no open position for the order, it can't be executed\";\n        } else if (positionForOrder.size.lt(order.sizeDelta)) {\n          error = \"The order size is bigger than position, it can't be executed\";\n        }\n      }\n\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"App-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"App-card-title-small\",\n          children: [order.type === INCREASE ? \"Increase\" : \"Decrease\", \" \", indexTokenSymbol, \" \", order.isLong ? \"Long\" : \"Short\", \"\\xA0by $\", formatAmount(order.sizeDelta, USD_DECIMALS, 2, true), error && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"Exchange-list-item-error\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 23\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"App-card-divider\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"App-card-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"App-card-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"label\",\n              children: \"Price\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [triggerPricePrefix, \" \", formatAmount(order.triggerPrice, USD_DECIMALS, 2, true)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"App-card-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"label\",\n              children: \"Mark Price\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(Tooltip, {\n                handle: formatAmount(markPrice, USD_DECIMALS, 2, true),\n                position: \"right-bottom\",\n                renderContent: () => {\n                  return /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: \"The price that the order can be executed at may differ slightly from the chart price as market orders can change the price while limit orders cannot.\"\n                  }, void 0, false);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 13\n          }, this), !hideActions && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"App-card-divider\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"App-card-options\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"App-button-option App-card-option\",\n                onClick: () => {\n                  trackAction(\"Button clicked\", {\n                    buttonName: \"Edit order\"\n                  });\n                  onEditClick(order);\n                },\n                children: \"Edit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 357,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"App-button-option App-card-option\",\n                onClick: () => {\n                  trackAction(\"Button clicked\", {\n                    buttonName: \"Cancel order\"\n                  });\n                  onCancelClick(order);\n                },\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 11\n        }, this)]\n      }, `${order.isLong}-${order.type}-${order.index}`, true, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 9\n      }, this);\n    });\n  }, [orders, onEditClick, onCancelClick, infoTokens, positionsMap, hideActions, chainId, account, trackAction]);\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App-box large\",\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"Exchange-list Orders large\",\n        children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: [renderHead(), renderEmptyRow(), renderLargeList()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 386,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Exchange-list Orders small\",\n      children: [(!orders || orders.length === 0) && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Exchange-empty-positions-list-note App-card\",\n        children: \"No open orders\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 11\n      }, this), renderSmallList()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 7\n    }, this), editingOrder && /*#__PURE__*/_jsxDEV(OrderEditor, {\n      account: account,\n      order: editingOrder,\n      setEditingOrder: setEditingOrder,\n      infoTokens: infoTokens,\n      pendingTxns: pendingTxns,\n      setPendingTxns: setPendingTxns,\n      getPositionForOrder: getPositionForOrder,\n      positionsMap: positionsMap,\n      library: library,\n      totalTokenWeights: totalTokenWeights,\n      usdgSupply: usdgSupply,\n      trackAction: trackAction\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 402,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 385,\n    columnNumber: 5\n  }, this);\n}\n\n_s(OrdersList, \"1cUBdzbSebKA+7xy98jlCpTqsyA=\");\n\n_c = OrdersList;\n\nvar _c;\n\n$RefreshReg$(_c, \"OrdersList\");","map":{"version":3,"names":["React","useState","useCallback","SWAP","INCREASE","DECREASE","USD_DECIMALS","formatAmount","TRIGGER_PREFIX_ABOVE","TRIGGER_PREFIX_BELOW","getExchangeRateDisplay","getTokenInfo","getExchangeRate","getPositionKey","cancelSwapOrder","cancelIncreaseOrder","cancelDecreaseOrder","getContract","Tooltip","OrderEditor","getPositionForOrder","account","order","positionsMap","key","collateralToken","indexToken","isLong","position","size","gt","OrdersList","props","library","setPendingTxns","pendingTxns","infoTokens","totalTokenWeights","usdgSupply","orders","hideActions","chainId","trackAction","editingOrder","setEditingOrder","onCancelClick","func","type","index","successMsg","failMsg","sentMsg","onEditClick","renderHead","renderEmptyRow","length","renderActions","renderLargeList","map","nativeTokenAddress","fromTokenInfo","path","toTokenInfo","shouldUnwrap","markExchangeRate","amountIn","decimals","isStable","isUsdg","symbol","minOut","triggerRatio","maximisePrice","markPrice","contractMaxPrice","contractMinPrice","triggerPricePrefix","triggerAboveThreshold","indexTokenSymbol","isWrapped","baseSymbol","error","positionForOrder","lt","sizeDelta","triggerPrice","renderSmallList","buttonName"],"sources":["C:/Users/rober/Documents/copiaswaps-client/swaps-client/src/components/Exchange/OrdersList.js"],"sourcesContent":["import React, { useState, useCallback } from \"react\";\n\nimport {\n  SWAP,\n  INCREASE,\n  DECREASE,\n  USD_DECIMALS,\n  formatAmount,\n  TRIGGER_PREFIX_ABOVE,\n  TRIGGER_PREFIX_BELOW,\n  getExchangeRateDisplay,\n  getTokenInfo,\n  getExchangeRate,\n  getPositionKey,\n} from \"../../Helpers.js\";\nimport { cancelSwapOrder, cancelIncreaseOrder, cancelDecreaseOrder } from \"../../Api\";\nimport { getContract } from \"../../Addresses\";\n\nimport Tooltip from \"../Tooltip/Tooltip\";\nimport OrderEditor from \"./OrderEditor\";\n\nimport \"./OrdersList.css\";\n\nfunction getPositionForOrder(account, order, positionsMap) {\n  const key = getPositionKey(account, order.collateralToken, order.indexToken, order.isLong);\n  const position = positionsMap[key];\n  return position && position.size && position.size.gt(0) ? position : null;\n}\n\nexport default function OrdersList(props) {\n  const {\n    account,\n    library,\n    setPendingTxns,\n    pendingTxns,\n    infoTokens,\n    positionsMap,\n    totalTokenWeights,\n    usdgSupply,\n    orders,\n    hideActions,\n    chainId,\n    trackAction,\n  } = props;\n\n  const [editingOrder, setEditingOrder] = useState(null);\n\n  const onCancelClick = useCallback(\n    (order) => {\n      let func;\n      if (order.type === SWAP) {\n        func = cancelSwapOrder;\n      } else if (order.type === INCREASE) {\n        func = cancelIncreaseOrder;\n      } else if (order.type === DECREASE) {\n        func = cancelDecreaseOrder;\n      }\n\n      return func(chainId, library, order.index, {\n        successMsg: \"Order cancelled.\",\n        failMsg: \"Cancel failed.\",\n        sentMsg: \"Cancel submitted.\",\n        pendingTxns,\n        setPendingTxns,\n      });\n    },\n    [library, pendingTxns, setPendingTxns, chainId]\n  );\n\n  const onEditClick = useCallback(\n    (order) => {\n      setEditingOrder(order);\n    },\n    [setEditingOrder]\n  );\n\n  const renderHead = useCallback(() => {\n    return (\n      <tr className=\"Exchange-list-header\">\n        <th>\n          <div>Type</div>\n        </th>\n        <th>\n          <div>Order</div>\n        </th>\n        <th>\n          <div>Price</div>\n        </th>\n        <th>\n          <div>Mark Price</div>\n        </th>\n        <th colSpan=\"2\"></th>\n      </tr>\n    );\n  }, []);\n\n  const renderEmptyRow = useCallback(() => {\n    if (orders && orders.length) {\n      return null;\n    }\n\n    return (\n      <tr>\n        <td colSpan=\"5\">\n          <div className=\"Exchange-empty-positions-list-note\">No open orders</div>\n        </td>\n      </tr>\n    );\n  }, [orders]);\n\n  const renderActions = useCallback(\n    (order) => {\n      return (\n        <>\n          <td>\n            <button className=\"Exchange-list-action\" onClick={() => onEditClick(order)}>\n              Edit\n            </button>\n          </td>\n          <td>\n            <button className=\"Exchange-list-action\" onClick={() => onCancelClick(order)}>\n              Cancel\n            </button>\n          </td>\n        </>\n      );\n    },\n    [onEditClick, onCancelClick]\n  );\n\n  const renderLargeList = useCallback(() => {\n    if (!orders || !orders.length) {\n      return null;\n    }\n\n    return orders.map((order) => {\n      if (order.type === SWAP) {\n        const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n        const fromTokenInfo = getTokenInfo(infoTokens, order.path[0], true, nativeTokenAddress);\n        const toTokenInfo = getTokenInfo(\n          infoTokens,\n          order.path[order.path.length - 1],\n          order.shouldUnwrap,\n          nativeTokenAddress\n        );\n\n        const markExchangeRate = getExchangeRate(fromTokenInfo, toTokenInfo);\n\n        return (\n          <tr className=\"Exchange-list-item\" key={`${order.type}-${order.index}`}>\n            <td className=\"Exchange-list-item-type\">Limit</td>\n            <td>\n              Swap{\" \"}\n              {formatAmount(\n                order.amountIn,\n                fromTokenInfo.decimals,\n                fromTokenInfo.isStable || fromTokenInfo.isUsdg ? 2 : 4,\n                true\n              )}{\" \"}\n              {fromTokenInfo.symbol} for{\" \"}\n              {formatAmount(\n                order.minOut,\n                toTokenInfo.decimals,\n                toTokenInfo.isStable || toTokenInfo.isUsdg ? 2 : 4,\n                true\n              )}{\" \"}\n              {toTokenInfo.symbol}\n            </td>\n            <td>\n              <Tooltip\n                handle={getExchangeRateDisplay(order.triggerRatio, fromTokenInfo, toTokenInfo)}\n                renderContent={() => `\n                  You will receive at least ${formatAmount(\n                    order.minOut,\n                    toTokenInfo.decimals,\n                    toTokenInfo.isStable || toTokenInfo.isUsdg ? 2 : 4,\n                    true\n                  )} ${\n                  toTokenInfo.symbol\n                } if this order is executed. The execution price may vary depending on swap fees at the time the order is executed.\n                `}\n              />\n            </td>\n            <td>{getExchangeRateDisplay(markExchangeRate, fromTokenInfo, toTokenInfo, true)}</td>\n            {!hideActions && renderActions(order)}\n          </tr>\n        );\n      }\n\n      const indexToken = getTokenInfo(infoTokens, order.indexToken);\n      const maximisePrice = (order.type === INCREASE && order.isLong) || (order.type === DECREASE && !order.isLong);\n      const markPrice = maximisePrice ? indexToken.contractMaxPrice : indexToken.contractMinPrice;\n      const triggerPricePrefix = order.triggerAboveThreshold ? TRIGGER_PREFIX_ABOVE : TRIGGER_PREFIX_BELOW;\n      const indexTokenSymbol = indexToken.isWrapped ? indexToken.baseSymbol : indexToken.symbol;\n\n      let error;\n      if (order.type === DECREASE) {\n        const positionForOrder = getPositionForOrder(account, order, positionsMap);\n        if (!positionForOrder) {\n          error = \"No open position, order cannot be executed\";\n        } else if (positionForOrder.size.lt(order.sizeDelta)) {\n          error = \"Order size exceeds position size, order cannot be executed\";\n        }\n      }\n\n      return (\n        <tr className=\"Exchange-list-item\" key={`${order.isLong}-${order.type}-${order.index}`}>\n          <td className=\"Exchange-list-item-type\">{order.type === INCREASE ? \"Limit\" : \"Trigger\"}</td>\n          <td>\n            {order.type === INCREASE ? \"Increase\" : \"Decrease\"} {indexTokenSymbol} {order.isLong ? \"Long\" : \"Short\"}\n            &nbsp;by ${formatAmount(order.sizeDelta, USD_DECIMALS, 2, true)}\n            {error && <div className=\"Exchange-list-item-error\">{error}</div>}\n          </td>\n          <td>\n            {triggerPricePrefix} {formatAmount(order.triggerPrice, USD_DECIMALS, 2, true)}\n          </td>\n          <td>\n            <Tooltip\n              handle={formatAmount(markPrice, USD_DECIMALS, 2, true)}\n              position=\"right-bottom\"\n              renderContent={() => {\n                return (\n                  <>\n                    The price that the order can be executed at may differ slightly from the chart price as market\n                    orders can change the price while limit orders cannot.\n                  </>\n                );\n              }}\n            />\n          </td>\n          {!hideActions && renderActions(order)}\n        </tr>\n      );\n    });\n  }, [orders, renderActions, infoTokens, positionsMap, hideActions, chainId, account]);\n\n  const renderSmallList = useCallback(() => {\n    if (!orders || !orders.length) {\n      return null;\n    }\n\n    return orders.map((order) => {\n      if (order.type === SWAP) {\n        const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n        const fromTokenInfo = getTokenInfo(infoTokens, order.path[0], true, nativeTokenAddress);\n        const toTokenInfo = getTokenInfo(\n          infoTokens,\n          order.path[order.path.length - 1],\n          order.shouldUnwrap,\n          nativeTokenAddress\n        );\n        const markExchangeRate = getExchangeRate(fromTokenInfo, toTokenInfo);\n\n        return (\n          <div key={`${order.type}-${order.index}`} className=\"App-card\">\n            <div className=\"App-card-title-small\">\n              Swap {formatAmount(order.amountIn, fromTokenInfo.decimals, fromTokenInfo.isStable ? 2 : 4, true)}{\" \"}\n              {fromTokenInfo.symbol} for{\" \"}\n              {formatAmount(order.minOut, toTokenInfo.decimals, toTokenInfo.isStable ? 2 : 4, true)}{\" \"}\n              {toTokenInfo.symbol}\n            </div>\n            <div className=\"App-card-divider\"></div>\n            <div className=\"App-card-content\">\n              <div className=\"App-card-row\">\n                <div className=\"label\">Price</div>\n                <div>\n                  <Tooltip\n                    position=\"right-bottom\"\n                    handle={getExchangeRateDisplay(order.triggerRatio, fromTokenInfo, toTokenInfo)}\n                    renderContent={() => `\n                    You will receive at least ${formatAmount(\n                      order.minOut,\n                      toTokenInfo.decimals,\n                      toTokenInfo.isStable || toTokenInfo.isUsdg ? 2 : 4,\n                      true\n                    )} ${\n                      toTokenInfo.symbol\n                    } if this order is executed. The exact execution price may vary depending on fees at the time the order is executed.\n                  `}\n                  />\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">Mark Price</div>\n                <div>{getExchangeRateDisplay(markExchangeRate, fromTokenInfo, toTokenInfo)}</div>\n              </div>\n              {!hideActions && (\n                <>\n                  <div className=\"App-card-divider\"></div>\n                  <div className=\"App-card-options\">\n                    <button className=\"App-button-option App-card-option\" onClick={() => onEditClick(order)}>\n                      Edit\n                    </button>\n                    <button className=\"App-button-option App-card-option\" onClick={() => onCancelClick(order)}>\n                      Cancel\n                    </button>\n                  </div>\n                </>\n              )}\n            </div>\n          </div>\n        );\n      }\n\n      const indexToken = getTokenInfo(infoTokens, order.indexToken);\n      const maximisePrice = (order.type === INCREASE && order.isLong) || (order.type === DECREASE && !order.isLong);\n      const markPrice = maximisePrice ? indexToken.contractMaxPrice : indexToken.contractMinPrice;\n      const triggerPricePrefix = order.triggerAboveThreshold ? TRIGGER_PREFIX_ABOVE : TRIGGER_PREFIX_BELOW;\n      const indexTokenSymbol = indexToken.isWrapped ? indexToken.baseSymbol : indexToken.symbol;\n\n      let error;\n      if (order.type === DECREASE) {\n        const positionForOrder = getPositionForOrder(account, order, positionsMap);\n        if (!positionForOrder) {\n          error = \"There is no open position for the order, it can't be executed\";\n        } else if (positionForOrder.size.lt(order.sizeDelta)) {\n          error = \"The order size is bigger than position, it can't be executed\";\n        }\n      }\n\n      return (\n        <div key={`${order.isLong}-${order.type}-${order.index}`} className=\"App-card\">\n          <div className=\"App-card-title-small\">\n            {order.type === INCREASE ? \"Increase\" : \"Decrease\"} {indexTokenSymbol} {order.isLong ? \"Long\" : \"Short\"}\n            &nbsp;by ${formatAmount(order.sizeDelta, USD_DECIMALS, 2, true)}\n            {error && <div className=\"Exchange-list-item-error\">{error}</div>}\n          </div>\n          <div className=\"App-card-divider\"></div>\n          <div className=\"App-card-content\">\n            <div className=\"App-card-row\">\n              <div className=\"label\">Price</div>\n              <div>\n                {triggerPricePrefix} {formatAmount(order.triggerPrice, USD_DECIMALS, 2, true)}\n              </div>\n            </div>\n            <div className=\"App-card-row\">\n              <div className=\"label\">Mark Price</div>\n              <div>\n                <Tooltip\n                  handle={formatAmount(markPrice, USD_DECIMALS, 2, true)}\n                  position=\"right-bottom\"\n                  renderContent={() => {\n                    return (\n                      <>\n                        The price that the order can be executed at may differ slightly from the chart price as market\n                        orders can change the price while limit orders cannot.\n                      </>\n                    );\n                  }}\n                />\n              </div>\n            </div>\n            {!hideActions && (\n              <>\n                <div className=\"App-card-divider\"></div>\n                <div className=\"App-card-options\">\n                  <button\n                    className=\"App-button-option App-card-option\"\n                    onClick={() => {\n                      trackAction(\"Button clicked\", { buttonName: \"Edit order\" });\n                      onEditClick(order);\n                    }}\n                  >\n                    Edit\n                  </button>\n                  <button\n                    className=\"App-button-option App-card-option\"\n                    onClick={() => {\n                      trackAction(\"Button clicked\", { buttonName: \"Cancel order\" });\n                      onCancelClick(order);\n                    }}\n                  >\n                    Cancel\n                  </button>\n                </div>\n              </>\n            )}\n          </div>\n        </div>\n      );\n    });\n  }, [orders, onEditClick, onCancelClick, infoTokens, positionsMap, hideActions, chainId, account, trackAction]);\n\n  return (\n    <React.Fragment>\n      <div className=\"App-box large\">\n        <table className=\"Exchange-list Orders large\">\n          <tbody>\n            {renderHead()}\n            {renderEmptyRow()}\n            {renderLargeList()}\n          </tbody>\n        </table>\n      </div>\n      <div className=\"Exchange-list Orders small\">\n        {(!orders || orders.length === 0) && (\n          <div className=\"Exchange-empty-positions-list-note App-card\">No open orders</div>\n        )}\n        {renderSmallList()}\n      </div>\n      {editingOrder && (\n        <OrderEditor\n          account={account}\n          order={editingOrder}\n          setEditingOrder={setEditingOrder}\n          infoTokens={infoTokens}\n          pendingTxns={pendingTxns}\n          setPendingTxns={setPendingTxns}\n          getPositionForOrder={getPositionForOrder}\n          positionsMap={positionsMap}\n          library={library}\n          totalTokenWeights={totalTokenWeights}\n          usdgSupply={usdgSupply}\n          trackAction={trackAction}\n        />\n      )}\n    </React.Fragment>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}