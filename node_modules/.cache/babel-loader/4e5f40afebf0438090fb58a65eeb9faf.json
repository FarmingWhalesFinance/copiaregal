{"ast":null,"code":"import { isFunction, isPlainObject, isString, isNumber } from '../../plugins/validation';\n/**\n * Helper for the track method\n */\n\nexport function resolveArguments(eventName, properties, options, callback) {\n  var _a;\n\n  var args = [eventName, properties, options, callback];\n  var name = isPlainObject(eventName) ? eventName.event : eventName;\n\n  if (!name || !isString(name)) {\n    throw new Error('Event missing');\n  }\n\n  var data = isPlainObject(eventName) ? (_a = eventName.properties) !== null && _a !== void 0 ? _a : {} : isPlainObject(properties) ? properties : {};\n  var opts = {};\n\n  if (isPlainObject(properties) && !isFunction(options)) {\n    opts = options !== null && options !== void 0 ? options : {};\n  }\n\n  if (isPlainObject(eventName) && !isFunction(properties)) {\n    opts = properties !== null && properties !== void 0 ? properties : {};\n  }\n\n  var cb = args.find(isFunction);\n  return [name, data, opts, cb];\n}\n/**\n * Helper for page, screen methods\n */\n\nexport function resolvePageArguments(category, name, properties, options, callback) {\n  var _a, _b;\n\n  var resolvedCategory = null;\n  var resolvedName = null;\n  var args = [category, name, properties, options, callback];\n  var strings = args.filter(isString);\n\n  if (strings[0] !== undefined && strings[1] !== undefined) {\n    resolvedCategory = strings[0];\n    resolvedName = strings[1];\n  }\n\n  if (strings.length === 1) {\n    resolvedCategory = null;\n    resolvedName = strings[0];\n  }\n\n  var resolvedCallback = args.find(isFunction);\n  var objects = args.filter(function (obj) {\n    if (resolvedName === null) {\n      return isPlainObject(obj);\n    }\n\n    return isPlainObject(obj) || obj === null;\n  });\n  var resolvedProperties = (_a = objects[0]) !== null && _a !== void 0 ? _a : {};\n  var resolvedOptions = (_b = objects[1]) !== null && _b !== void 0 ? _b : {};\n  return [resolvedCategory, resolvedName, resolvedProperties, resolvedOptions, resolvedCallback];\n}\n/**\n * Helper for group, identify methods\n */\n\nexport var resolveUserArguments = function (user) {\n  return function () {\n    var _a, _b, _c, _d, _e;\n\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    var id = null;\n    id = (_c = (_a = args.find(isString)) !== null && _a !== void 0 ? _a : (_b = args.find(isNumber)) === null || _b === void 0 ? void 0 : _b.toString()) !== null && _c !== void 0 ? _c : user.id();\n    var objects = args.filter(function (obj) {\n      if (id === null) {\n        return isPlainObject(obj);\n      }\n\n      return isPlainObject(obj) || obj === null;\n    });\n    var traits = (_d = objects[0]) !== null && _d !== void 0 ? _d : {};\n    var opts = (_e = objects[1]) !== null && _e !== void 0 ? _e : {};\n    var resolvedCallback = args.find(isFunction);\n    return [id, traits, opts, resolvedCallback];\n  };\n};\n/**\n * Helper for alias method\n */\n\nexport function resolveAliasArguments(to, from, options, callback) {\n  if (isNumber(to)) to = to.toString(); // Legacy behaviour - allow integers for alias calls\n\n  if (isNumber(from)) from = from.toString();\n  var args = [to, from, options, callback];\n\n  var _a = args.filter(isString),\n      _b = _a[0],\n      aliasTo = _b === void 0 ? to : _b,\n      _c = _a[1],\n      aliasFrom = _c === void 0 ? null : _c;\n\n  var _d = args.filter(isPlainObject)[0],\n      opts = _d === void 0 ? {} : _d;\n  var resolvedCallback = args.find(isFunction);\n  return [aliasTo, aliasFrom, opts, resolvedCallback];\n}","map":{"version":3,"sources":["../../../../src/core/arguments-resolver/index.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { isFunction, isPlainObject, isString, isNumber, } from '../../plugins/validation';\n/**\n * Helper for the track method\n */\nexport function resolveArguments(eventName, properties, options, callback) {\n    var _a;\n    var args = [eventName, properties, options, callback];\n    var name = isPlainObject(eventName) ? eventName.event : eventName;\n    if (!name || !isString(name)) {\n        throw new Error('Event missing');\n    }\n    var data = isPlainObject(eventName)\n        ? (_a = eventName.properties) !== null && _a !== void 0 ? _a : {}\n        : isPlainObject(properties)\n            ? properties\n            : {};\n    var opts = {};\n    if (isPlainObject(properties) && !isFunction(options)) {\n        opts = options !== null && options !== void 0 ? options : {};\n    }\n    if (isPlainObject(eventName) && !isFunction(properties)) {\n        opts = properties !== null && properties !== void 0 ? properties : {};\n    }\n    var cb = args.find(isFunction);\n    return [name, data, opts, cb];\n}\n/**\n * Helper for page, screen methods\n */\nexport function resolvePageArguments(category, name, properties, options, callback) {\n    var _a, _b;\n    var resolvedCategory = null;\n    var resolvedName = null;\n    var args = [category, name, properties, options, callback];\n    var strings = args.filter(isString);\n    if (strings[0] !== undefined && strings[1] !== undefined) {\n        resolvedCategory = strings[0];\n        resolvedName = strings[1];\n    }\n    if (strings.length === 1) {\n        resolvedCategory = null;\n        resolvedName = strings[0];\n    }\n    var resolvedCallback = args.find(isFunction);\n    var objects = args.filter(function (obj) {\n        if (resolvedName === null) {\n            return isPlainObject(obj);\n        }\n        return isPlainObject(obj) || obj === null;\n    });\n    var resolvedProperties = ((_a = objects[0]) !== null && _a !== void 0 ? _a : {});\n    var resolvedOptions = ((_b = objects[1]) !== null && _b !== void 0 ? _b : {});\n    return [\n        resolvedCategory,\n        resolvedName,\n        resolvedProperties,\n        resolvedOptions,\n        resolvedCallback,\n    ];\n}\n/**\n * Helper for group, identify methods\n */\nexport var resolveUserArguments = function (user) {\n    return function () {\n        var _a, _b, _c, _d, _e;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var id = null;\n        id = (_c = (_a = args.find(isString)) !== null && _a !== void 0 ? _a : (_b = args.find(isNumber)) === null || _b === void 0 ? void 0 : _b.toString()) !== null && _c !== void 0 ? _c : user.id();\n        var objects = args.filter(function (obj) {\n            if (id === null) {\n                return isPlainObject(obj);\n            }\n            return isPlainObject(obj) || obj === null;\n        });\n        var traits = ((_d = objects[0]) !== null && _d !== void 0 ? _d : {});\n        var opts = ((_e = objects[1]) !== null && _e !== void 0 ? _e : {});\n        var resolvedCallback = args.find(isFunction);\n        return [id, traits, opts, resolvedCallback];\n    };\n};\n/**\n * Helper for alias method\n */\nexport function resolveAliasArguments(to, from, options, callback) {\n    if (isNumber(to))\n        to = to.toString(); // Legacy behaviour - allow integers for alias calls\n    if (isNumber(from))\n        from = from.toString();\n    var args = [to, from, options, callback];\n    var _a = args.filter(isString), _b = _a[0], aliasTo = _b === void 0 ? to : _b, _c = _a[1], aliasFrom = _c === void 0 ? null : _c;\n    var _d = args.filter(isPlainObject)[0], opts = _d === void 0 ? {} : _d;\n    var resolvedCallback = args.find(isFunction);\n    return [aliasTo, aliasFrom, opts, resolvedCallback];\n}\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"module"}